---
import { formatDate } from "@/markup/datetime";
import Avatar from "@/profession/resume/avatar.png";
import AntiSpamEmailHeadingItem from "@/profession/resume/AntiSpamEmailHeadingItem.astro";
import HeadingItem from "@/profession/resume/HeadingItem.astro";
import ResumeIcon from "@/profession/resume/Icon.astro";
import Role from "@/profession/resume/Role.astro";
import RoleDescription from "@/profession/resume/RoleDescription.astro";
import RoleTitle from "@/profession/resume/RoleTitle.astro";
import Project from "@/profession/resume/Project.astro";
import SectionTitle from "@/profession/resume/SectionTitle.astro";
import Skill from "@/profession/resume/Skill.astro";
import PDFResume from "@/profession/resume/print.pdf";
import { computeYearsExperience, PINNED_PROJECTS } from "@/profession/facts";
import RootLayout from "@/site/Root.astro";

const now = new Date();
const years = computeYearsExperience();
const fromAmsterdam = '<span class="hidden md:inline"> from Amsterdam</span>';
const printLink = '<a href="https://www.spookysoftware.dev/about/resume/">online version</a>';
---

<RootLayout
  htmlClass="bg-resume-body-background-light"
  bodyClass="bg-none bg-resume-body-background-light text-resume-primary print:font-['Arial']"
  content={{ title: "Eric Kim-Butler's Résumé" }}
>
  <header class="flex flex-col gap-6 pt-5 print:gap-3">
    <div class="clamped flex gap-6">
      <img
        class="h-32 w-32 rounded-lg print:h-24 print:w-24 md:h-40 md:w-40 print:md:h-24 print:md:w-24"
        src={Avatar.src}
        alt="Headshot photo of Eric"
      />
      <div>
        <h1
          class="mb-1 text-3xl text-resume-highlight print:text-4xl md:text-5xl print:md:text-4xl"
        >
          Eric <span class="block font-semibold print:inline">Kim-Butler</span>
        </h1>
        <p>
          Software Engineer
          <span
            class="block pt-1 text-sm italic text-resume-secondary print:inline print:pl-1 print:pt-0 md:inline md:pl-1 md:pt-0"
          >
            Amsterdam, The Netherlands
          </span>
        </p>
        <p
          class="absolute right-0 top-0 rounded-bl bg-resume-context px-2 py-1 text-sm print:hidden md:static md:mt-1 md:rounded-none md:bg-inherit md:px-0"
        >
          <a download="Eric Kim-Butler's Résumé.pdf" href={PDFResume}>
            <span class="md:hidden">PDF</span>
            <span class="hidden md:inline">Download PDF Version</span>
          </a>
        </p>
        <p class="mt-1 hidden text-xs print:inline">
          <span class="text-sm">*</span> This PDF was automatically generated from an
          <Fragment set:html={printLink} />
           on {formatDate(now)}.
        </p>
      </div>
    </div>
    <div class="border-y border-resume-context-accent bg-resume-context py-3">
      <ul
        class="clamped flex flex-wrap items-center justify-between gap-4 text-center text-sm sm:flex-nowrap md:text-base print:md:text-sm"
      >
        <li class="hidden print:inline md:inline">
          <ResumeIcon class="h-5 w-5" />
        </li>
        <AntiSpamEmailHeadingItem />
        <HeadingItem title="Web" href="https://www.spookysoftware.dev/">
          {"www.spookysoftware.dev"}
        </HeadingItem>
        <HeadingItem title="GitHub" href="https://github.com/dairyisscary">
          {"dairyisscary"}
        </HeadingItem>
        <li class="hidden print:inline md:inline">
          <ResumeIcon class="h-5 w-5 rotate-180" />
        </li>
      </ul>
    </div>
  </header>
  <main
    class="clamped grid gap-9 py-9 print:grid-cols-3 print:gap-6 print:gap-y-4 print:py-5 md:grid-cols-2 print:md:grid-cols-3 lg:grid-cols-3 lg:gap-7 lg:py-7"
  >
    <section class="print:col-span-full lg:col-span-full">
      <SectionTitle>The Gist</SectionTitle>
      <p class="print:text-xs">
        I am a remote software engineer with {years.professionalYearsExperience}+ years of
        professional experience working at startup-staged companies. I have a deep drive to create
        quality software that empowers its users. I also have a passion for DEI and have worked to
        make technology a more welcoming place for all.
      </p>
    </section>
    <section>
      <SectionTitle>Skills</SectionTitle>
      <ul>
        <Skill title="JavaScript & TypeScript" value={0.95} />
        <Skill title="Accessibility" value={0.75} />
        <Skill title="React" value={1} />
        <Skill title="HTML & CSS" value={0.85} />
        <Skill title="Sysadmin & DevOps" value={0.65} />
        <Skill title="Elixir" value={0.6} />
        <Skill title="Python" value={0.3} />
        <Skill title="PostgreSQL" value={0.4} />
      </ul>
    </section>
    <section
      class="flex flex-col rounded bg-resume-context p-5 print:col-span-2 print:row-span-3 print:p-5 md:col-span-2 md:p-7 print:md:p-5 lg:row-span-3"
    >
      <SectionTitle>Work Experience</SectionTitle>
      <ol class="roles invisible flex flex-1 flex-col">
        <Role>
          <RoleTitle start={2017} organization="Proof">
            <Fragment slot="location">
              Boston, MA (Remote<Fragment set:html={fromAmsterdam} />)
            </Fragment>
             Staff Software Engineer
          </RoleTitle>
          <RoleDescription>
            I am a lead product engineer for the web client architecture on a team of 50+ engineers.
            I mentor, teach, conduct peer review, steward, and drive modern engineering practices. I
            also manage much of the tooling (Webpack, Jest, Babel, etc.) and our DevOps automated
            processes and pipelines. I helped to establish our engineering support and on-call
            processes.
          </RoleDescription>
          <RoleDescription>
            As an individual contributor, I also write, design, and maintain many vertical,
            customer-facing features (TypeScript, GraphQL, React). Some notable features include our
            WebRTC audio and video calling, real-time PDF collaboration and signing experience,
            automated credential analysis, fraud protection, and mission-critical legal audit
            trailing.
          </RoleDescription>
        </Role>
        <Role>
          <RoleTitle start={2013} end={2017} organization="Shoobx">
            <Fragment slot="location">Boston, MA</Fragment>
             Software Engineer
          </RoleTitle>
          <RoleDescription>
            I was primarily responsible for full-stack product features for a web-based corporate
            governance legal platform. Some projects I contributed to include multi-participant
            workflows for fundraising, equity management, HR, and board-member and stockholder
            relations (Python and Angular 1). I also co-developed a full end-to-end capitalization
            table and legal document data drive. I led the design and development of a declarative
            form library for automatically generated and reusable HTML.
          </RoleDescription>
        </Role>
      </ol>
    </section>
    <section>
      <SectionTitle>Projects</SectionTitle>
      <ol class="space-y-4 print:space-y-3">
        {
          PINNED_PROJECTS.map((project) => (
            <Project
              href={project.link}
              description={project.description}
              technology={project.technologyDescription}
            >
              {project.title}
            </Project>
          ))
        }
        <Project description="Jest, eslint, gatsby, RxJS, Elixir, terraform">
          Other Open-Source
        </Project>
      </ol>
    </section>
    <section>
      <SectionTitle>Education</SectionTitle>
      <h3 class="text-lg font-semibold print:text-base">Bachelors of Science</h3>
      <h4 class="mb-3 text-resume-secondary print:text-sm">Wilkes University | 2009-2013</h4>
      <p class="text-sm print:text-xs">
        <span class="font-semibold">Majors:</span> Computer Science and Philosophy
      </p>
      <p class="text-sm print:text-xs">
        <span class="font-semibold">Coursework:</span> Algorithms &amp; Datastructures, Operating
        Systems, Networking, and Ethics
      </p>
    </section>
  </main>
</RootLayout>

<style>
  .clamped {
    width: min(100%, 73rem);
    @apply mx-auto px-5;
  }

  .roles:hover > :global(*) {
    @apply opacity-50;
  }

  .roles > :global(*:hover) {
    @apply opacity-100;
  }
</style>
